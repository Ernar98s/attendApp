{"remainingRequest":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\src\\views\\DashboardHistory.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\src\\views\\DashboardHistory.vue","mtime":1619911757282},{"path":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmNsYXBhbnMgLmZvcm0taW5saW5lIHsNCiAgbWFyZ2luLWxlZnQ6IDE1cHg7DQp9DQoNCi5hbGVydF9ibG9jayB7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgcmlnaHQ6IDA7DQogIGJvdHRvbTogMDsNCn0NCg=="},{"version":3,"sources":["DashboardHistory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0TA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"DashboardHistory.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <WidgetsDropdown/>\r\n    <CRow class=\"clapans\">\r\n      <CCol md=\"12\">\r\n        <CCard>\r\n          <CCardHeader>\r\n            <div class=\"d-flex aligin-items-center justify-content-between\">\r\n              <span>Клапаны</span>\r\n              <CButton color=\"success\" @click=\"warningModal = !warningModal\">\r\n                Добавить\r\n              </CButton>\r\n            </div>\r\n          </CCardHeader\r\n          >\r\n          <CCardBody>\r\n            <div class=\"d-flex aligin-items-center justify-content-between\">\r\n              <CSelect\r\n                  v-if=\"isSelect\"\r\n                  horizontal\r\n                  label=\"Действие на выбор\"\r\n                  :value.sync=\"action_switcher\"\r\n                  :options=\"['Не выбрано ничего','Включить отмеченные','Отключить отмеченные']\"\r\n                  v-on:change=\"actionSwitcher()\"\r\n                  class=\"col-4\"\r\n              />\r\n              <CSelect\r\n                  horizontal\r\n                  label=\"Город\"\r\n                  :options=\"['Алматы', 'Астана']\"\r\n                  class=\"col-4\"\r\n              />\r\n              <!--              <CInput placeholder=\"\" v-on:change=\"search()\">-->\r\n              <!--                <template #append>-->\r\n              <!--                  <CButton color=\"primary\">-->\r\n              <!--                    <CIcon name=\"cil-magnifying-glass\"/>-->\r\n              <!--                    Search-->\r\n              <!--                  </CButton>-->\r\n              <!--                </template>-->\r\n              <!--              </CInput>-->\r\n            </div>\r\n            <CDataTable\r\n                class=\"mb-0 table-outline\"\r\n                hover\r\n                :items=\"tableItems\"\r\n                :fields=\"tableFields\"\r\n                head-color=\"light\"\r\n                column-filter\r\n                table-filter\r\n                sorter\r\n                :tableFilter=\"{'label':'Поиск','placeholder':'Введите слово для поиска'}\"\r\n\r\n            >\r\n              <td slot=\"select\" slot-scope=\"{ item }\">\r\n                <CInputCheckbox\r\n                    :value=\"item.select\"\r\n                    custom\r\n                    inline\r\n                    @change=\"isSelect = true\"\r\n                />\r\n              </td>\r\n              <td slot=\"city\" slot-scope=\"{ item }\">\r\n                {{ item.city }}\r\n              </td>\r\n              <td slot=\"district\" slot-scope=\"{ item }\">\r\n                {{ item.district }}\r\n              </td>\r\n              <td slot=\"street\" slot-scope=\"{ item }\">\r\n                {{ item.street }}\r\n              </td>\r\n              <td slot=\"building\" slot-scope=\"{ item }\">\r\n                {{ item.typeofbuilding }}\r\n              </td>\r\n              <td slot=\"numHouse\" slot-scope=\"{ item }\">\r\n                {{ item.buildingnum }}\r\n              </td>\r\n              <td slot=\"numDoor\" slot-scope=\"{ item }\">\r\n                {{ item.entrancenum }}\r\n              </td>\r\n              <td slot=\"numMine\" slot-scope=\"{ item }\">\r\n                {{ item.shaftnum }}\r\n              </td>\r\n              <td slot=\"stage\" slot-scope=\"{ item }\">\r\n                {{ item.floor }}\r\n              </td>\r\n              <td slot=\"numOffice\" slot-scope=\"{ item }\">\r\n                {{ item.aptoroffice }}\r\n              </td>\r\n              <td slot=\"id\" slot-scope=\"{ item }\">\r\n                {{ item.valveID }}\r\n              </td>\r\n              <td slot=\"status\" slot-scope=\"{ item }\">\r\n                <CBadge v-if=\"item.status==0\" color=\"danger\">\r\n                  выключен\r\n                </CBadge\r\n                >\r\n                <CBadge v-else-if=\"item.status==1\" color=\"success\">включен</CBadge>\r\n                <CBadge v-else-if=\"item.status==2\" color=\"warning\">нет данных</CBadge>\r\n                <CBadge v-else color=\"info\">не известно</CBadge>\r\n                <br/>\r\n                <CSwitch\r\n                    class=\"mt-1\"\r\n                    color=\"primary\"\r\n                    :checked.sync=\"item.status==1\"\r\n                    :value=\"item.status\"\r\n                    @update:checked=\"actionStatusChange(item)\"\r\n                />\r\n              </td>\r\n              <td slot=\"settings\" slot-scope=\"{ item }\">\r\n                <span\r\n                    style=\"white-space: nowrap; cursor: pointer\"\r\n                    class=\"d-flex align-items-center\"\r\n                    @click=\"warningModal = !warningModal\"\r\n                ><CIcon name=\"cilSettings\" class=\"mr-1\"/> Настройки\r\n                </span>\r\n                <span\r\n                    style=\"white-space: nowrap; cursor: pointer\"\r\n                    class=\"d-flex align-items-center\"\r\n                    @click=\"$router.push({path: '/dashboard/'+item.id})\"\r\n                ><CIcon name=\"cilSettings\" class=\"mr-1\"/> История\r\n                </span>\r\n              </td>\r\n            </CDataTable>\r\n          </CCardBody>\r\n        </CCard>\r\n      </CCol>\r\n    </CRow>\r\n    <CModal title=\"Настройки\" :show.sync=\"warningModal\">\r\n      <CCard>\r\n        <!-- <CCardHeader> <strong>Horizontal</strong> Form </CCardHeader> -->\r\n        <CCardBody>\r\n          <CForm>\r\n            <CInputRadioGroup\r\n                class=\"col-sm mb-3\"\r\n                :options=\"['Физ лицо', 'Юр лицо']\"\r\n                custom\r\n                inline\r\n            />\r\n            <CInput\r\n                type=\"text\"\r\n                description=\"building name.\"\r\n                label=\"Building name\"\r\n                horizontal\r\n                placeholder=\"Building name\"\r\n            />\r\n            <CInput\r\n                type=\"text\"\r\n                description=\"Master ID.\"\r\n                label=\"Master ID\"\r\n                horizontal\r\n                placeholder=\"Master ID\"\r\n            />\r\n            <CInput\r\n                type=\"text\"\r\n                description=\"Masterhub ID.\"\r\n                label=\"Masterhub ID\"\r\n                horizontal\r\n                placeholder=\"Masterhub ID\"\r\n            />\r\n            <CInput\r\n                type=\"text\"\r\n                description=\"Owner name.\"\r\n                label=\"Owner name\"\r\n                horizontal\r\n                placeholder=\"Owner name\"\r\n            />\r\n            <CInput\r\n                type=\"text\"\r\n                description=\"Owner contacts.\"\r\n                label=\"Owner contacts\"\r\n                horizontal\r\n                placeholder=\"Owner contacts\"\r\n            />\r\n            <CInput\r\n                type=\"text\"\r\n                description=\"Owner ID.\"\r\n                label=\"Owner ID\"\r\n                horizontal\r\n                placeholder=\"Owner ID\"\r\n            />\r\n            <CInput\r\n                type=\"text\"\r\n                description=\"Payment.\"\r\n                label=\"Payment\"\r\n                horizontal\r\n                placeholder=\"Payment\"\r\n            />\r\n            <CInput\r\n                type=\"text\"\r\n                description=\"Contract.\"\r\n                label=\"Contract\"\r\n                horizontal\r\n                placeholder=\"Contract\"\r\n            />\r\n          </CForm>\r\n        </CCardBody>\r\n      </CCard>\r\n    </CModal>\r\n    <div class=\"alert_block\">\r\n      <CAlert color=\"primary\" closeButton v-if=\"warning\">\r\n        {{ alert_message }}\r\n      </CAlert>\r\n      <CAlert color=\"primary\" closeButton v-if=\"success\">\r\n        {{ alert_message }}\r\n      </CAlert>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MainChartExample from \"./charts/MainChartExample\";\r\nimport WidgetsDropdown from \"./widgets/WidgetsDropdown\";\r\nimport WidgetsBrand from \"./widgets/WidgetsBrand\";\r\n\r\nconst qs = require('qs')\r\nconst axios = require('axios')\r\nexport default {\r\n  name: \"Dashboard\",\r\n  components: {\r\n    MainChartExample,\r\n    WidgetsDropdown,\r\n    WidgetsBrand,\r\n  },\r\n  data() {\r\n    return {\r\n      warning: false,\r\n      success: false,\r\n      alert_message: '',\r\n      warningModal: false,\r\n      isSelect: false,\r\n      action_switcher: '',\r\n      id: \"\",\r\n      tableItems: [],\r\n      tableFields: [\r\n        {key: \"select\", label: \"\", sorter: false, filter: false},\r\n        {key: \"city\", label: \"Город \"},\r\n        {key: \"district\", label: \"Район \", _classes: \"text-center\"},\r\n        {key: \"street\", label: \"Улица \"},\r\n        {key: \"typeofbuilding\", label: \"Вид здания\"},\r\n        {key: \"buildingnum\", label: \"Номер дома \"},\r\n        {key: \"entrancenum\", label: \"Номер подъезда \"},\r\n        {key: \"shaftnum\", label: \"Номер шахты \"},\r\n        {key: \"floor\", label: \"Этаж\"},\r\n        {key: \"aptoroffice\", label: \"Кв/офис\"},\r\n        {key: \"valveID\", label: \"ID клапана\"},\r\n        {key: \"status\", label: \"Статус клапана\", filter: false},\r\n        {key: \"settings\", label: \"Действия\", sorter: false, filter: false},\r\n      ],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getResults();\r\n  },\r\n  methods: {\r\n    search() {\r\n\r\n    },\r\n    actionSwitcher() {\r\n      console.log(this.action_switcher);\r\n    },\r\n    actionStatusChange(item, index) {\r\n      console.log(item);\r\n      let app = this;\r\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + window.auth.token;\r\n      axios(\r\n          {\r\n            method: 'post',\r\n            url: '/turnon/',\r\n            data: qs.stringify({\r\n              device_id: item.valveID,\r\n            }),\r\n          })\r\n          .then(({data}) => {\r\n            app.success = true;\r\n            app.alert_message = data.responce;\r\n            setTimeout(function () {\r\n              app.success = false;\r\n            }, 3000)\r\n\r\n          }).catch(function (error) {\r\n\r\n      })\r\n    },\r\n    getResults() {\r\n      let app = this;\r\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + window.auth.token;\r\n      axios.get('/getvalvesbycity/0').then(response => {\r\n        app.tableItems = response.data;\r\n        for (var i = 0; i < app.tableItems.length; i++) {\r\n          app.tableItems[i].select = false;\r\n        }\r\n      }).catch(error => {\r\n        if (error.response.status == 401) {\r\n          window.auth.logout();\r\n        }\r\n      });\r\n    },\r\n    color(value) {\r\n      let $color;\r\n      if (value <= 25) {\r\n        $color = \"info\";\r\n      } else if (value > 25 && value <= 50) {\r\n        $color = \"success\";\r\n      } else if (value > 50 && value <= 75) {\r\n        $color = \"warning\";\r\n      } else if (value > 75 && value <= 100) {\r\n        $color = \"danger\";\r\n      }\r\n      return $color;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.clapans .form-inline {\r\n  margin-left: 15px;\r\n}\r\n\r\n.alert_block {\r\n  position: fixed;\r\n  right: 0;\r\n  bottom: 0;\r\n}\r\n</style>"]}]}