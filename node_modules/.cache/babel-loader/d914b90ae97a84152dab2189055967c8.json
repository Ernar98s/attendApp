{"remainingRequest":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\src\\auth.js","dependencies":[{"path":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\src\\auth.js","mtime":1619699119754},{"path":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Omen\\Downloads\\Telegram Desktop\\project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCnZhciBBdXRoID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBBdXRoKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGgpOwoKICAgIHRoaXMudG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICB2YXIgdXNlckRhdGEgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTsKICAgIHZhciByb2xlRGF0YSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncm9sZScpOwogICAgdGhpcy51c2VyID0gdXNlckRhdGEgPyBKU09OLnBhcnNlKHVzZXJEYXRhKSA6IG51bGw7CiAgICB0aGlzLnJvbGUgPSByb2xlRGF0YSA/IHJvbGVEYXRhIDogbnVsbDsKCiAgICBpZiAodGhpcy50b2tlbikgewogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnICsgdGhpcy50b2tlbjsKICAgIH0KICB9CgogIF9jcmVhdGVDbGFzcyhBdXRoLCBbewogICAga2V5OiAibG9nb3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidG9rZW4iKTsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VyIik7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgicm9sZSIpOwogICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZWRpdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZWRpdCh1c2VyKSB7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9naW4odG9rZW4sIHVzZXIsIHJvbGUpIHsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkodXNlcikpOwogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JvbGUnLCByb2xlKTsKICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIHRva2VuOwogICAgICB0aGlzLnRva2VuID0gdG9rZW47CiAgICAgIHRoaXMudXNlciA9IHVzZXI7CiAgICAgIHRoaXMucm9sZSA9IHJvbGU7CiAgICAgIEV2ZW50LiRlbWl0KCd1c2VyTG9nZ2VkSW4nKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRVc2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVc2VyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCcvZ2V0LXVzZXInKS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGE7CiAgICAgICAgX3RoaXMudXNlciA9IGRhdGE7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgIHZhciByZXNwb25zZSA9IF9yZWYyLnJlc3BvbnNlOwoKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgIF90aGlzLmxvZ291dCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2hlY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrKCkgewogICAgICByZXR1cm4gISF0aGlzLnRva2VuOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEF1dGg7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IEF1dGg7"},{"version":3,"sources":["C:/Users/Omen/Downloads/Telegram Desktop/project/src/auth.js"],"names":["Auth","token","window","localStorage","getItem","userData","roleData","user","JSON","parse","role","axios","defaults","headers","common","removeItem","location","reload","setItem","stringify","Event","$emit","get","then","data","catch","response","status","logout"],"mappings":";;;;;;IAAMA,I;AACF,kBAAc;AAAA;;AACV,SAAKC,KAAL,GAAaC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAb;AACA,QAAIC,QAAQ,GAAGH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAf;AACA,QAAIE,QAAQ,GAAGJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAf;AACA,SAAKG,IAAL,GAAYF,QAAQ,GAAGG,IAAI,CAACC,KAAL,CAAWJ,QAAX,CAAH,GAA0B,IAA9C;AACA,SAAKK,IAAL,GAAYJ,QAAQ,GAAGA,QAAH,GAAc,IAAlC;;AACA,QAAI,KAAKL,KAAT,EAAgB;AACZU,MAAAA,KAAK,CAACC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,YAAY,KAAKb,KAAlE;AACH;AACJ;;;;WAED,kBAAS;AACLC,MAAAA,MAAM,CAACC,YAAP,CAAoBY,UAApB,CAA+B,OAA/B;AACAb,MAAAA,MAAM,CAACC,YAAP,CAAoBY,UAApB,CAA+B,MAA/B;AACAb,MAAAA,MAAM,CAACC,YAAP,CAAoBY,UAApB,CAA+B,MAA/B;AACAb,MAAAA,MAAM,CAACc,QAAP,CAAgBC,MAAhB;AACH;;;WAED,cAAKV,IAAL,EAAW;AACPL,MAAAA,MAAM,CAACC,YAAP,CAAoBe,OAApB,CAA4B,MAA5B,EAAoCV,IAAI,CAACW,SAAL,CAAeZ,IAAf,CAApC;AACH;;;WAED,eAAMN,KAAN,EAAaM,IAAb,EAAmBG,IAAnB,EAAyB;AAErBR,MAAAA,MAAM,CAACC,YAAP,CAAoBe,OAApB,CAA4B,OAA5B,EAAqCjB,KAArC;AACAC,MAAAA,MAAM,CAACC,YAAP,CAAoBe,OAApB,CAA4B,MAA5B,EAAoCV,IAAI,CAACW,SAAL,CAAeZ,IAAf,CAApC;AACAL,MAAAA,MAAM,CAACC,YAAP,CAAoBe,OAApB,CAA4B,MAA5B,EAAoCR,IAApC;AACAC,MAAAA,KAAK,CAACC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,YAAYb,KAA7D;AACA,WAAKA,KAAL,GAAaA,KAAb;AACA,WAAKM,IAAL,GAAYA,IAAZ;AACA,WAAKG,IAAL,GAAYA,IAAZ;AACAU,MAAAA,KAAK,CAACC,KAAN,CAAY,cAAZ;AACH;;;WAED,mBAAU;AAAA;;AACNV,MAAAA,KAAK,CAACW,GAAN,CAAU,WAAV,EACKC,IADL,CACU,gBAAY;AAAA,YAAVC,IAAU,QAAVA,IAAU;AACd,QAAA,KAAI,CAACjB,IAAL,GAAYiB,IAAZ;AACH,OAHL,EAIKC,KAJL,CAIW,iBAAgB;AAAA,YAAdC,QAAc,SAAdA,QAAc;;AACnB,YAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AACzB,UAAA,KAAI,CAACC,MAAL;AACH;AACJ,OARL;AASH;;;WAED,iBAAQ;AACJ,aAAO,CAAC,CAAC,KAAK3B,KAAd;AACH;;;;;;AAGL,eAAeD,IAAf","sourcesContent":["class Auth {\r\n    constructor() {\r\n        this.token = window.localStorage.getItem('token');\r\n        let userData = window.localStorage.getItem('user');\r\n        let roleData = window.localStorage.getItem('role');\r\n        this.user = userData ? JSON.parse(userData) : null;\r\n        this.role = roleData ? roleData : null;\r\n        if (this.token) {\r\n            axios.defaults.headers.common['Authorization'] = 'Bearer ' + this.token;\r\n        }\r\n    }\r\n\r\n    logout() {\r\n        window.localStorage.removeItem(\"token\");\r\n        window.localStorage.removeItem(\"user\");\r\n        window.localStorage.removeItem(\"role\");\r\n        window.location.reload();\r\n    }\r\n\r\n    edit(user) {\r\n        window.localStorage.setItem('user', JSON.stringify(user));\r\n    }\r\n\r\n    login(token, user, role) {\r\n\r\n        window.localStorage.setItem('token', token);\r\n        window.localStorage.setItem('user', JSON.stringify(user));\r\n        window.localStorage.setItem('role', role);\r\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\r\n        this.token = token;\r\n        this.user = user;\r\n        this.role = role;\r\n        Event.$emit('userLoggedIn');\r\n    }\r\n\r\n    getUser() {\r\n        axios.get('/get-user')\r\n            .then(({data}) => {\r\n                this.user = data;\r\n            })\r\n            .catch(({response}) => {\r\n                if (response.status === 401) {\r\n                    this.logout();\r\n                }\r\n            });\r\n    }\r\n\r\n    check() {\r\n        return !!this.token;\r\n    }\r\n}\r\n\r\nexport default Auth;\r\n"]}]}